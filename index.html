<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Leafy Library - necotastudio</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-green: #4CAF50;
            --dark-green: #2E7D32;
            --wood-brown: #5D4037;
            --paper-white: #F5F5DC;
            --rakuten-red: #BF0000;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: var(--paper-white);
            color: var(--wood-brown);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 100px;
        }

        header {
            background-color: var(--primary-green);
            color: white;
            width: 100%;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .header-logo {
            width: 80px; height: 80px; border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin-bottom: 10px; background: white;
            object-fit: cover;
        }

        .stats { font-size: 1.5rem; margin: 15px 0; font-weight: 900; }

        .bookshelf {
            width: 90%; max-width: 500px; background-color: var(--wood-brown);
            padding: 20px 15px; border-radius: 8px; margin: 20px 0;
            min-height: 120px; display: flex; flex-wrap: wrap; gap: 8px;
            align-content: flex-start; border-bottom: 12px solid #3e2723;
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.4);
        }

        .book {
            width: 22px; height: 80px; border-left: 3px solid rgba(255,255,255,0.2);
            border-radius: 3px; cursor: pointer; transition: all 0.2s ease;
        }

        .book:hover { transform: translateY(-15px); box-shadow: 5px 15px 20px rgba(0,0,0,0.4); }

        #display-panel {
            width: 85%; max-width: 480px; background: white; padding: 20px;
            border-radius: 20px; border: 3px solid var(--primary-green);
            margin: 15px 0; text-align: center; display: none; animation: fadeIn 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .sns-buttons { margin-top: 15px; display: flex; justify-content: center; gap: 10px; }
        .btn-sns { padding: 10px 20px; border-radius: 25px; border: none; color: white; text-decoration: none; font-weight: bold; font-size: 0.8rem; }
        .btn-x { background-color: #000; }
        .btn-insta { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }

        .affiliate-box { margin-top: 15px; padding: 12px; border: 2px solid var(--rakuten-red); background-color: #fff5f5; border-radius: 12px; }
        .affiliate-link { color: var(--rakuten-red); font-weight: bold; text-decoration: none; font-size: 0.9rem; }

        .controls { width: 90%; max-width: 500px; background: #fff; padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); box-sizing: border-box; }
        label { font-size: 0.8rem; font-weight: bold; color: var(--dark-green); display: block; margin-top: 10px; text-align: left; }
        select, button { padding: 12px; margin: 8px 0; border-radius: 12px; border: 1px solid #ccc; font-size: 16px; width: 100%; box-sizing: border-box; font-family: 'Zen Maru Gothic', sans-serif; }
        
        .btn-eat { background-color: var(--primary-green); color: white; border: none; cursor: pointer; font-weight: 900; box-shadow: 0 4px 0 var(--dark-green); }
        .btn-eat:active { transform: translateY(2px); box-shadow: 0 2px 0 var(--dark-green); }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>

<header>
    <img src="hamono.png" alt="Leafy Library ãƒ­ã‚´" class="header-logo" onerror="this.style.display='none';">
    <h1 style="margin:0;">Leafy Library</h1>
    <small>LL - ä¸–ç•Œã®è‘‰ç‰©é‡èœè²¯è”µåº« by necotastudio</small>
</header>

<div class="stats">ç·è‘‰ã£ã±æ•°: <span id="leaf-count">0</span> æš</div>

<div class="bookshelf" id="shelf"></div>

<div id="display-panel">
    <div id="panel-content"></div>
    <div class="sns-buttons">
        <a id="share-x" class="btn-sns btn-x" target="_blank"><i class="fa-brands fa-x-twitter"></i> Xã§å ±å‘Š</a>
        <a href="https://www.instagram.com/necotastudio" target="_blank" class="btn-sns btn-insta"><i class="fa-brands fa-instagram"></i> Insta</a>
    </div>
</div>

<div class="controls">
    <label>â‘  ã‚«ãƒ†ã‚´ãƒªã‚’é¸ã¶</label>
    <select id="category-filter" onchange="filterMenu()">
        <option value="åŸºæœ¬">åŸºæœ¬ã®ã‚µãƒ©ãƒ€ãƒ»ç”Ÿé£Ÿ</option>
        <option value="æ¬§å·">æ¬§å·ã®ç…®è¾¼ã¿ãƒ»åŒ…ã¿æ–™ç†</option>
        <option value="æ±æ´‹">ã‚¢ã‚¸ã‚¢ã®ç‚’ã‚ãƒ»ä¸­è¯æ–™ç†</option>
        <option value="å’Œé£Ÿ">æ—¥æœ¬ã®ä¼çµ±ãƒ»å’Œãˆç‰©ãƒ»å¤©ã·ã‚‰</option>
        <option value="æ¶²ä½“">é£²ã¿ç‰©ãƒ»ã‚¹ãƒ¼ãƒ—ãƒ»é’æ±</option>
    </select>

    <label>â‘¡ å…·ä½“çš„ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸ã¶</label>
    <select id="food-select"></select>
    
    <button class="btn-eat" onclick="eat()">é‡èœã‚’è¨˜éŒ²ã—ã¦è”µæ›¸ã‚’å¢—ã‚„ã™</button>
</div>

<script>
    let totalLeaves = 0;
    let unlockedIds = new Set();
    const rakutenBase = "https://hb.afl.rakuten.co.jp/hgc/38bc4499.7d06e22c.38bc449a.2e400495/?pc=https%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F";

    // å…¨ä¸–ç•Œã®è‘‰ç‰©æ–™ç†ãƒã‚¹ã‚¿ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    const masterMenu = [
        {cat: "åŸºæœ¬", name: "ã‚·ãƒ¼ã‚¶ãƒ¼ã‚µãƒ©ãƒ€ / ãƒ¬ã‚¿ã‚¹ã‚µãƒ©ãƒ€", count: 3, keyword: "ãƒ­ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¿ã‚¹"},
        {cat: "åŸºæœ¬", name: "ã‚³ãƒ¼ãƒ«ã‚¹ãƒ­ãƒ¼ (ã‚­ãƒ£ãƒ™ãƒ„)", count: 3, keyword: "ã‚³ãƒ¼ãƒ«ã‚¹ãƒ­ãƒ¼"},
        {cat: "åŸºæœ¬", name: "ã‚µãƒ³ãƒãƒ¥ / å·»ãé‡èœ", count: 4, keyword: "ã‚µãƒ³ãƒãƒ¥"},
        {cat: "åŸºæœ¬", name: "ãƒãƒ§ãƒ¬ã‚®ã‚µãƒ©ãƒ€", count: 4, keyword: "ãƒãƒ§ãƒ¬ã‚®ã‚µãƒ©ãƒ€"},
        {cat: "æ¬§å·", name: "ãƒ­ãƒ¼ãƒ«ã‚­ãƒ£ãƒ™ãƒ„ / ã‚¬ãƒ«ãƒ ã‚·", count: 5, keyword: "ãƒ­ãƒ¼ãƒ«ã‚­ãƒ£ãƒ™ãƒ„"},
        {cat: "æ¬§å·", name: "ã‚±ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚¹ / ãƒ™ã‚¤ã‚¯ãƒ‰ã‚±ãƒ¼ãƒ«", count: 6, keyword: "ã‚±ãƒ¼ãƒ«+ãƒãƒƒãƒ—ã‚¹"},
        {cat: "æ¬§å·", name: "ã»ã†ã‚Œã‚“è‰ã®ãƒ©ã‚¶ãƒ‹ã‚¢ / ã‚­ãƒƒã‚·ãƒ¥", count: 5, keyword: "ã»ã†ã‚Œã‚“è‰+å†·å‡"},
        {cat: "æ¬§å·", name: "ãƒãƒˆãƒ• / ãƒœãƒ«ã‚·ãƒ (ã‚­ãƒ£ãƒ™ãƒ„å¤šã‚)", count: 4, keyword: "ãƒœãƒ«ã‚·ãƒ"},
        {cat: "æ±æ´‹", name: "ç©ºèŠ¯èœç‚’ã‚ (ã‚«ãƒ³ã‚³ãƒ³ç‚’ã‚)", count: 6, keyword: "ç©ºèŠ¯èœ"},
        {cat: "æ±æ´‹", name: "é’æ¤’è‚‰çµ² / å›é‹è‚‰ (ãƒ”ãƒ¼ãƒãƒ³ãƒ»ã‚­ãƒ£ãƒ™ãƒ„)", count: 4, keyword: "å›é‹è‚‰"},
        {cat: "æ±æ´‹", name: "é¤ƒå­ / æ˜¥å·»ã (ç™½èœãƒ»ãƒ‹ãƒ©å¤šã‚)", count: 3, keyword: "é¤ƒå­"},
        {cat: "æ±æ´‹", name: "å…«å®èœ / ä¸­è¯ä¸¼", count: 5, keyword: "å…«å®èœ"},
        {cat: "æ±æ´‹", name: "ãƒŠãƒ ãƒ« / ãƒ“ãƒ“ãƒ³ãƒã®å…·", count: 4, keyword: "ãƒŠãƒ ãƒ«+ã‚»ãƒƒãƒˆ"},
        {cat: "å’Œé£Ÿ", name: "ãŠæµ¸ã— / èƒ¡éº»å’Œãˆ (ã»ã†ã‚Œã‚“è‰ç­‰)", count: 5, keyword: "ã»ã†ã‚Œã‚“è‰+ãŠæµ¸ã—"},
        {cat: "å’Œé£Ÿ", name: "æµ…æ¼¬ã‘ / ãŠæ–°é¦™ (ç™½èœãƒ»é‡æ²¢èœ)", count: 2, keyword: "ç™½èœ+æ¼¬ç‰©"},
        {cat: "å’Œé£Ÿ", name: "å¤©ã·ã‚‰ (æ˜æ—¥è‘‰ãƒ»å¤§è‘‰ãƒ»å±±èœ)", count: 4, keyword: "å±±èœ+å¤©ã·ã‚‰"},
        {cat: "å’Œé£Ÿ", name: "ãŠå¥½ã¿ç„¼ã (ã‚­ãƒ£ãƒ™ãƒ„å¤§é‡)", count: 5, keyword: "ãŠå¥½ã¿ç„¼ã"},
        {cat: "æ¶²ä½“", name: "100%é’æ± (ã‚±ãƒ¼ãƒ«ãƒ»å¤§éº¦è‹¥è‘‰)", count: 10, keyword: "é’æ±"},
        {cat: "æ¶²ä½“", name: "ã‚°ãƒªãƒ¼ãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼ / ãƒ‘ã‚»ãƒªã‚¸ãƒ¥ãƒ¼ã‚¹", count: 7, keyword: "ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼"},
        {cat: "æ¶²ä½“", name: "å…·ã ãã•ã‚“å‘³å™Œæ± (è‘‰ç‰©å¤šã‚)", count: 3, keyword: "å‘³å™Œæ±+ãƒ•ãƒªãƒ¼ã‚ºãƒ‰ãƒ©ã‚¤"},
        {cat: "æ¶²ä½“", name: "è–¬è†³ã‚¹ãƒ¼ãƒ— / ãƒãƒ¼ãƒ–ãƒ†ã‚£ãƒ¼", count: 2, keyword: "è–¬è†³ã‚¹ãƒ¼ãƒ—"}
    ];

    // å›³æ›¸é¤¨ã®è”µæ›¸ãƒ‡ãƒ¼ã‚¿
    const bookData = [
        {id: 1, threshold: 10, genre: "æ˜”è©±", title: "ç·‘ã®å°‘å¹´ã®è¨˜éŒ²", desc: "ã‚­ãƒ£ãƒ™ãƒ„ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸå°‘å¹´ã®ç‰©èªã€‚", color: "#e91e63", keyword: "æ˜”è©±+æœ¬"},
        {id: 2, threshold: 50, genre: "é­”æ³•", title: "å…‰ã‚’ç¯ã™å‘ªæ–‡", desc: "åˆå¿ƒè€…å‘ã‘ã®é­”æ³•æ›¸ã€‚", color: "#9c27b0", keyword: "é­”æ³•+æœ¬"},
        {id: 3, threshold: 150, genre: "æ­´å²", title: "ãƒŠã‚¤ãƒ«ã®åº­åœ’", desc: "å¤ä»£ã‚¨ã‚¸ãƒ—ãƒˆã§ç¥è–è¦–ã•ã‚ŒãŸãƒ¬ã‚¿ã‚¹ã®æ­´å²ã€‚", color: "#795548", keyword: "å¤ä»£ã‚¨ã‚¸ãƒ—ãƒˆ+æ­´å²"},
        {id: 4, threshold: 300, genre: "å†’é™º", title: "ã‚¢ãƒã‚¾ãƒ³ã®å·¨å¤§è‘‰", desc: "äººãŒä¹—ã‚Œã‚‹ã»ã©å·¨å¤§ãªè‘‰ã‚’æ±‚ã‚ãŸæ¢æ¤œè¨˜ã€‚", color: "#009688", keyword: "å†’é™º+æ¤ç‰©"},
        {id: 5, threshold: 600, genre: "ä¼èª¬", title: "ç¿¡ç¿ ã®æ£®ã®å¸æ›¸", desc: "ä¸‡ã®è‘‰ã‚’æ„›ã—ãŸä¼èª¬ã®å¸æ›¸ãŒæ®‹ã—ãŸç©¶æ¥µã®ãƒ¬ã‚·ãƒ”ã€‚", color: "#00695c", keyword: "ä¼èª¬+ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"}
    ];

    function filterMenu() {
        const cat = document.getElementById('category-filter').value;
        const select = document.getElementById('food-select');
        select.innerHTML = "";
        masterMenu.forEach(item => {
            if (item.cat === cat) {
                const opt = document.createElement('option');
                opt.value = item.count;
                opt.text = `${item.name} (+${item.count}æš)`;
                opt.setAttribute('data-link', rakutenBase + encodeURIComponent(item.keyword) + "%2F");
                select.appendChild(opt);
            }
        });
    }

    function eat() {
        const select = document.getElementById('food-select');
        if (!select.value) return;
        const count = parseInt(select.value);
        const foodName = select.options[select.selectedIndex].text;
        const rakutenLink = select.options[select.selectedIndex].getAttribute('data-link');

        totalLeaves += count;
        document.getElementById('leaf-count').innerText = totalLeaves;

        showPanel(`
            <h3 style="color:var(--dark-green); margin:0;">ğŸŒ¿ ${foodName} ã‚’è¨˜éŒ²ï¼</h3>
            <p>ç¾åœ¨ã®è”µæ›¸ã¯ ${totalLeaves} æšã§ã™ã€‚</p>
            <div class="affiliate-box">
                <a href="${rakutenLink}" class="affiliate-link" target="_blank">ã€æ¥½å¤©ã€‘ã“ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ â”</a>
            </div>
        `, `Leafy Libraryã§ã€Œ${foodName}ã€ã‚’è¨˜éŒ²ï¼åˆè¨ˆ${totalLeaves}æšã®è‘‰ã‚’è²¯è”µä¸­ï¼ #necotastudio #è‘‰ç‰©é‡èœ`);

        checkUnlock();
    }

    function checkUnlock() {
        bookData.forEach(book => {
            if (totalLeaves >= book.threshold && !unlockedIds.has(book.id)) {
                unlockedIds.add(book.id);
                const shelf = document.getElementById('shelf');
                const b = document.createElement('div');
                b.className = 'book'; b.style.backgroundColor = book.color;
                b.title = book.title;
                b.onclick = () => {
                    const bookLink = rakutenBase + encodeURIComponent(book.keyword) + "%2F";
                    showPanel(`
                        <h3>ğŸ“–ã€${book.title}ã€</h3>
                        <p>ã‚¸ãƒ£ãƒ³ãƒ«: ${book.genre}</p>
                        <p>${book.desc}</p>
                        <div class="affiliate-box"><a href="${bookLink}" class="affiliate-link" target="_blank">é–¢é€£æ›¸ç±ã‚’æ¤œç´¢ â”</a></div>
                    `, `æ–°åˆŠã€${book.title}ã€ã‚’ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ï¼ #necotastudio #LeafyLibrary`);
                };
                shelf.appendChild(b);
            }
        });
    }

    function showPanel(html, shareText) {
        document.getElementById('panel-content').innerHTML = html;
        document.getElementById('display-panel').style.display = 'block';
        document.getElementById('share-x').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(window.location.href)}`;
    }

    // åˆæœŸåŒ–
    filterMenu();
</script>
</body>
</html>
